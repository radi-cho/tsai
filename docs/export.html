---

title: export: nb2py


keywords: fastai
sidebar: home_sidebar

summary: "Code that allows you to export a notebook (.ipynb) as a python script( .py) to a target folder."
description: "Code that allows you to export a notebook (.ipynb) as a python script( .py) to a target folder."
nb_path: "nbs/000_export.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/000_export.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>nb2py will allow you to convert the notebook (.ipynb) where the function is executed to a python script.</p>
<p>The conversion applies these rules:</p>
<ul>
<li>The notebook will be automatically saved when the function is executed.</li>
<li>Only code cells will be converted (not markdown cells).</li>
<li>A header will be added to indicate the script has been automatically generated. It also indicates where the original ipynb is.</li>
<li>Cells with a #hide flag won't be converted. Flag variants like # hide, #Hide, #HIDE, ... are also acceptable.</li>
<li>Empty cells and unnecessary empty lines within cells will be removed.</li>
<li>By default the script will be created with the same name and in the same folder of the original notebook. But you can pass a dir folder and a different name if you wish.</li>
<li>If a script with the same name already exists, it will be overwriten.</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This code is required to identify flags in the notebook. We are looking for #hide flags.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This code automatically gets the name of the notebook. It's been tested to work on Jupyter notebooks, Jupyter Lab and Google Colab.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_nb_name" class="doc_header"><code>get_nb_name</code><a href="https://github.com/timeseriesAI/tsai/tree/main/tsai/export.py#L143" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_nb_name</code>()</p>
</blockquote>
<p>Returns the short name of the notebook w/o the .ipynb extension,
or raises a FileNotFoundError exception if it cannot be determined.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_colab_nb_name" class="doc_header"><code>get_colab_nb_name</code><a href="https://github.com/timeseriesAI/tsai/tree/main/tsai/export.py#L156" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_colab_nb_name</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_nb_path" class="doc_header"><code>get_nb_path</code><a href="https://github.com/timeseriesAI/tsai/tree/main/tsai/export.py#L164" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_nb_path</code>()</p>
</blockquote>
<p>Returns the absolute path of the notebook,
or raises a FileNotFoundError exception if it cannot be determined.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="nb_name_to_py" class="doc_header"><code>nb_name_to_py</code><a href="https://github.com/timeseriesAI/tsai/tree/main/tsai/export.py#L180" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>nb_name_to_py</code>(<strong><code>nb_name</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_script_path" class="doc_header"><code>get_script_path</code><a href="https://github.com/timeseriesAI/tsai/tree/main/tsai/export.py#L183" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_script_path</code>(<strong><code>nb_name</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This code is used when trying to save a file to google drive. We first need to mount the drive.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="nb2py" class="doc_header"><code>nb2py</code><a href="https://github.com/timeseriesAI/tsai/tree/main/tsai/export.py#L188" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>nb2py</code>(<strong><code>nb</code></strong>:"absolute or relative full path to the notebook you want to convert to a python script"=<em><code>None</code></em>, <strong><code>folder</code></strong>:"absolute or relative path to folder of the script you will create. Defaults to current nb's directory"=<em><code>None</code></em>, <strong><code>name</code></strong>:"name of the script you want to create. Defaults to current nb name .ipynb by .py"=<em><code>None</code></em>, <strong><code>save</code></strong>:"saves the nb before converting it to a script"=<em><code>True</code></em>, <strong><code>run</code></strong>:"import and run the script"=<em><code>False</code></em>, <strong><code>verbose</code></strong>:"controls verbosity"=<em><code>True</code></em>)</p>
</blockquote>
<p>Converts a notebook to a python script in a predefined folder.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">is_colab</span><span class="p">():</span>
    <span class="n">nb</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">pyname</span> <span class="o">=</span> <span class="n">nb2py</span><span class="p">(</span><span class="n">nb</span><span class="o">=</span><span class="n">nb</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pyname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> 
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>

    <span class="n">nb</span> <span class="o">=</span> <span class="s1">&#39;000_export.ipynb&#39;</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">pyname</span> <span class="o">=</span> <span class="n">nb2py</span><span class="p">(</span><span class="n">nb</span><span class="o">=</span><span class="n">nb</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pyname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> 
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>

    <span class="n">nb</span> <span class="o">=</span> <span class="s1">&#39;../nbs/000_export&#39;</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">pyname</span> <span class="o">=</span> <span class="n">nb2py</span><span class="p">(</span><span class="n">nb</span><span class="o">=</span><span class="n">nb</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pyname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> 
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>

    <span class="n">nb</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="s1">&#39;../test_export/&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">pyname</span> <span class="o">=</span> <span class="n">nb2py</span><span class="p">(</span><span class="n">nb</span><span class="o">=</span><span class="n">nb</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pyname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> 
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">pyname</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>nb2py couldn&#39;t get the nb name. Pass it as an nb argument and rerun nb2py.
000_export.ipynb converted to 000_export.py
000_export.ipynb converted to ../nbs/000_export.py
nb2py couldn&#39;t get the nb name. Pass it as an nb argument and rerun nb2py.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

